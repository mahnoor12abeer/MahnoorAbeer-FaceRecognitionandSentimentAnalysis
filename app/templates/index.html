<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Video Stream</title>
    <script>
        async function stopServerAndRedirect() {
            try {
                await fetch('/stop', {method: 'GET'});
                alert("Server will shut down. Redirecting to upload page...");
                window.location.href = "/";
            } catch (error) {
                console.error("Failed to stop server", error);
            }
        }
    </script>
</head>
<body>
    <h1>Video Streaming</h1>
    <img src="{{ url_for('video_feed') }}" width="720"/>
    <br/><br/>
    <button onclick="stopServerAndRedirect()">Stop Server and Redirect</button>
</body>
</html>